{"timestamp": "2026-01-05T03:26:52.573743Z", "level": "INFO", "logger": "memory-service", "message": "Logging initialized for memory-service", "module": "logging", "function": "setup_logging", "line": 126}
{"timestamp": "2026-01-05T03:26:52.574090Z", "level": "INFO", "logger": "memory-service", "message": "Starting memory-service...", "module": "run", "function": "main", "line": 59}
{"timestamp": "2026-01-05T03:26:52.574168Z", "level": "INFO", "logger": "memory-service", "message": "Configuration: host=0.0.0.0, port=8008", "module": "run", "function": "main", "line": 60}
{"timestamp": "2026-01-05T03:26:52.574236Z", "level": "INFO", "logger": "memory-service", "message": "LLM: ollama - qwen3:latest @ http://localhost:11434", "module": "run", "function": "main", "line": 61}
{"timestamp": "2026-01-05T03:26:52.584444Z", "level": "INFO", "logger": "services.memory_service.service", "message": "LLM client initialized: qwen3:latest @ http://localhost:11434", "module": "service", "function": "from_config", "line": 161}
{"timestamp": "2026-01-05T03:26:52.584601Z", "level": "INFO", "logger": "services.memory_service.memory", "message": "[Memory] 持久化存储路径: data/memory_store", "module": "memory", "function": "__init__", "line": 176}
{"timestamp": "2026-01-05T03:26:52.585049Z", "level": "INFO", "logger": "services.memory_service.store", "message": "[Store] Loaded 1 namespaces from disk", "module": "store", "function": "_load_all", "line": 525}
{"timestamp": "2026-01-05T03:26:52.585157Z", "level": "INFO", "logger": "services.memory_service.store", "message": "[Store] PersistentStore initialized at data/memory_store", "module": "store", "function": "__init__", "line": 495}
{"timestamp": "2026-01-05T03:26:52.585226Z", "level": "INFO", "logger": "services.memory_service.store", "message": "[StoreManager] Initialized with PersistentStore", "module": "store", "function": "__init__", "line": 734}
{"timestamp": "2026-01-05T03:26:52.585290Z", "level": "INFO", "logger": "memory-service", "message": "memory-service starting on http://0.0.0.0:8008", "module": "run", "function": "main", "line": 69}
INFO:     Started server process [37033]
INFO:     Waiting for application startup.
{"timestamp": "2026-01-05T03:26:52.655993Z", "level": "INFO", "logger": "services.common.fastapi_nacos", "message": "Nacos registration disabled", "module": "fastapi_nacos", "function": "startup", "line": 115}
/Users/liuguanghu/PythonPorject/intelligent-customer-service/services/memory_service/service.py:173: RuntimeWarning: coroutine 'MemoryManager.load_persisted_memories' was never awaited
  self.memory_manager.load_persisted_memories()
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
{"timestamp": "2026-01-05T03:26:52.657675Z", "level": "INFO", "logger": "services.memory_service.service", "message": "Loaded persisted short-term memories", "module": "service", "function": "initialize", "line": 174}
{"timestamp": "2026-01-05T03:26:52.657779Z", "level": "INFO", "logger": "services.memory_service.service", "message": "Memory Service initialized", "module": "service", "function": "initialize", "line": 179}
{"timestamp": "2026-01-05T03:26:52.657863Z", "level": "INFO", "logger": "services.memory_service.server", "message": "Memory Service started", "module": "server", "function": "_on_startup", "line": 184}
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8008 (Press CTRL+C to quit)
INFO:     127.0.0.1:54800 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:54801 - "POST /api/conversations HTTP/1.1" 200 OK
INFO:     127.0.0.1:54802 - "POST /api/conversations/3f6380c5-2ae7-4a7a-9d08-f523594753fe/messages HTTP/1.1" 200 OK
INFO:     127.0.0.1:54803 - "POST /api/conversations/3f6380c5-2ae7-4a7a-9d08-f523594753fe/messages HTTP/1.1" 422 Unprocessable Content
INFO:     127.0.0.1:54804 - "GET /api/conversations/3f6380c5-2ae7-4a7a-9d08-f523594753fe/context HTTP/1.1" 200 OK
{"timestamp": "2026-01-05T03:26:56.768900Z", "level": "INFO", "logger": "services.memory_service.store", "message": "[StoreManager] Set user preference: user123/language=zh-CN", "module": "store", "function": "set_user_preference", "line": 762}
INFO:     127.0.0.1:54805 - "PUT /api/users/user123/preferences/language HTTP/1.1" 200 OK
{"timestamp": "2026-01-05T03:26:56.779952Z", "level": "ERROR", "logger": "services.memory_service.server", "message": "Get preferences failed: 'StoreManager' object has no attribute 'search_user_preferences'", "module": "server", "function": "get_user_preferences", "line": 412}
INFO:     127.0.0.1:54806 - "GET /api/users/user123/preferences HTTP/1.1" 500 Internal Server Error
{"timestamp": "2026-01-05T03:26:56.791385Z", "level": "ERROR", "logger": "services.memory_service.service", "message": "Failed to store knowledge: StoreManager.store_knowledge() missing 1 required positional argument: 'content'", "module": "service", "function": "store_knowledge", "line": 570}
INFO:     127.0.0.1:54807 - "POST /api/knowledge HTTP/1.1" 200 OK
WARNING:  Invalid HTTP request received.
INFO:     127.0.0.1:54809 - "GET /api/stats HTTP/1.1" 200 OK
