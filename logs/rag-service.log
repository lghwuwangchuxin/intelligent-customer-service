{"timestamp": "2025-12-31T08:55:25.048768Z", "level": "INFO", "logger": "rag-service", "message": "Logging initialized for rag-service", "module": "logging", "function": "setup_logging", "line": 126}
{"timestamp": "2025-12-31T08:55:25.048920Z", "level": "INFO", "logger": "rag-service", "message": "Starting rag-service...", "module": "run", "function": "main", "line": 52}
{"timestamp": "2025-12-31T08:55:25.049007Z", "level": "INFO", "logger": "rag-service", "message": "Configuration: host=0.0.0.0, port=8002", "module": "run", "function": "main", "line": 53}
{"timestamp": "2025-12-31T08:55:25.049085Z", "level": "INFO", "logger": "rag-service", "message": "Elasticsearch: http://localhost:9200", "module": "run", "function": "main", "line": 54}
{"timestamp": "2025-12-31T08:55:25.388494Z", "level": "INFO", "logger": "rag-service", "message": "rag-service starting on http://0.0.0.0:8002", "module": "run", "function": "main", "line": 62}
{"timestamp": "2025-12-31T08:55:25.487632Z", "level": "ERROR", "logger": "services.common.nacos_client", "message": "Failed to register service rag-service with Nacos: nacos-sdk-python is required. Install it with: pip install nacos-sdk-python", "module": "nacos_client", "function": "register_service", "line": 212}
{"timestamp": "2025-12-31T08:55:25.487732Z", "level": "WARNING", "logger": "services.rag_service.server", "message": "Failed to register with Nacos: nacos-sdk-python is required. Install it with: pip install nacos-sdk-python", "module": "server", "function": "_register_with_nacos", "line": 156}
{"timestamp": "2025-12-31T08:56:02.162025Z", "level": "INFO", "logger": "services.rag_service.index.index_manager", "message": "Index manager initialized", "module": "index_manager", "function": "initialize", "line": 80}
{"timestamp": "2025-12-31T08:56:02.162403Z", "level": "INFO", "logger": "services.rag_service.service", "message": "RAG Service initialized", "module": "service", "function": "initialize", "line": 161}
{"timestamp": "2025-12-31T08:56:02.322262Z", "level": "WARNING", "logger": "services.rag_service.pipeline.query_transform", "message": "Query expansion failed: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404", "module": "query_transform", "function": "_expand_query", "line": 152}
{"timestamp": "2025-12-31T08:56:02.322387Z", "level": "WARNING", "logger": "services.rag_service.pipeline.query_transform", "message": "Query rewriting failed: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404", "module": "query_transform", "function": "_rewrite_query", "line": 180}
{"timestamp": "2025-12-31T08:56:02.322755Z", "level": "WARNING", "logger": "services.rag_service.pipeline.query_transform", "message": "HyDE generation failed: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404", "module": "query_transform", "function": "_generate_hyde_passage", "line": 127}
{"timestamp": "2025-12-31T09:23:30.867796Z", "level": "INFO", "logger": "rag-service", "message": "Logging initialized for rag-service", "module": "logging", "function": "setup_logging", "line": 126}
{"timestamp": "2025-12-31T09:23:30.867973Z", "level": "INFO", "logger": "rag-service", "message": "Starting rag-service...", "module": "run", "function": "main", "line": 52}
{"timestamp": "2025-12-31T09:23:30.868071Z", "level": "INFO", "logger": "rag-service", "message": "Configuration: host=0.0.0.0, port=8002", "module": "run", "function": "main", "line": 53}
{"timestamp": "2025-12-31T09:23:30.868156Z", "level": "INFO", "logger": "rag-service", "message": "Elasticsearch: http://localhost:9200", "module": "run", "function": "main", "line": 54}
{"timestamp": "2025-12-31T09:23:31.499450Z", "level": "INFO", "logger": "rag-service", "message": "rag-service starting on http://0.0.0.0:8002", "module": "run", "function": "main", "line": 62}
{"timestamp": "2025-12-31T09:23:31.650243Z", "level": "ERROR", "logger": "services.common.nacos_client", "message": "Failed to register service rag-service with Nacos: nacos-sdk-python is required. Install it with: pip install nacos-sdk-python", "module": "nacos_client", "function": "register_service", "line": 212}
{"timestamp": "2025-12-31T09:23:31.650391Z", "level": "WARNING", "logger": "services.rag_service.server", "message": "Failed to register with Nacos: nacos-sdk-python is required. Install it with: pip install nacos-sdk-python", "module": "server", "function": "_register_with_nacos", "line": 156}
{"timestamp": "2025-12-31T09:24:27.153400Z", "level": "WARNING", "logger": "services.rag_service.pipeline.query_transform", "message": "Query expansion failed: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404", "module": "query_transform", "function": "_expand_query", "line": 152}
{"timestamp": "2025-12-31T09:24:27.153651Z", "level": "WARNING", "logger": "services.rag_service.pipeline.query_transform", "message": "Query rewriting failed: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404", "module": "query_transform", "function": "_rewrite_query", "line": 180}
{"timestamp": "2025-12-31T09:24:27.154025Z", "level": "WARNING", "logger": "services.rag_service.pipeline.query_transform", "message": "HyDE generation failed: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404", "module": "query_transform", "function": "_generate_hyde_passage", "line": 127}
{"timestamp": "2025-12-31T10:14:15.679393Z", "level": "INFO", "logger": "rag-service", "message": "Logging initialized for rag-service", "module": "logging", "function": "setup_logging", "line": 126}
{"timestamp": "2025-12-31T10:14:15.679503Z", "level": "INFO", "logger": "rag-service", "message": "Starting rag-service...", "module": "run", "function": "main", "line": 52}
{"timestamp": "2025-12-31T10:14:15.679577Z", "level": "INFO", "logger": "rag-service", "message": "Configuration: host=0.0.0.0, port=8002", "module": "run", "function": "main", "line": 53}
{"timestamp": "2025-12-31T10:14:15.679643Z", "level": "INFO", "logger": "rag-service", "message": "Elasticsearch: http://localhost:9200", "module": "run", "function": "main", "line": 54}
{"timestamp": "2025-12-31T10:14:15.691321Z", "level": "INFO", "logger": "rag-service", "message": "rag-service starting on http://0.0.0.0:8002", "module": "run", "function": "main", "line": 62}
{"timestamp": "2025-12-31T10:14:15.806393Z", "level": "INFO", "logger": "nacos.client", "message": "user server address  localhost:8848", "module": "client", "function": "__init__", "line": 288}
{"timestamp": "2025-12-31T10:14:15.806510Z", "level": "INFO", "logger": "nacos.client", "message": "[client-init] endpoint:None, tenant:public", "module": "client", "function": "__init__", "line": 349}
{"timestamp": "2025-12-31T10:14:15.807610Z", "level": "INFO", "logger": "nacos.client", "message": "[add-naming-instance] ip:127.0.0.1, port:8002, service_name:rag-service, namespace:public", "module": "client", "function": "add_naming_instance", "line": 955}
{"timestamp": "2025-12-31T10:14:15.821038Z", "level": "INFO", "logger": "nacos.client", "message": "[add-naming-instance] ip:127.0.0.1, port:8002, service_name:rag-service, namespace:public, server response:b'ok'", "module": "client", "function": "add_naming_instance", "line": 978}
{"timestamp": "2025-12-31T10:14:15.821735Z", "level": "INFO", "logger": "services.common.nacos_client", "message": "Registered service with Nacos: rag-service (ID: rag-service-56b512d5, Address: 127.0.0.1:8002)", "module": "nacos_client", "function": "register_service", "line": 209}
{"timestamp": "2025-12-31T10:14:15.821839Z", "level": "INFO", "logger": "services.common.fastapi_nacos", "message": "Service registered with Nacos: rag-service (ID: rag-service-56b512d5, Address: 127.0.0.1:8002)", "module": "fastapi_nacos", "function": "startup", "line": 149}
{"timestamp": "2025-12-31T10:14:21.541762Z", "level": "INFO", "logger": "services.rag_service.storage.milvus_client", "message": "Created Milvus collection: customer_service_kb", "module": "milvus_client", "function": "_create_collection", "line": 107}
{"timestamp": "2025-12-31T10:14:22.140133Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "GET http://localhost:9200/ [status:200 duration:0.314s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2025-12-31T10:14:22.140339Z", "level": "INFO", "logger": "services.rag_service.storage.elasticsearch_client", "message": "Connected to Elasticsearch: 8.5.0", "module": "elasticsearch_client", "function": "connect", "line": 69}
{"timestamp": "2025-12-31T10:14:23.515839Z", "level": "INFO", "logger": "services.rag_service.storage.embedding_service", "message": "Embedding model warmed up: nomic-embed-text", "module": "embedding_service", "function": "warmup", "line": 166}
{"timestamp": "2025-12-31T10:14:23.516323Z", "level": "ERROR", "logger": "services.rag_service.index.index_manager", "message": "Failed to ensure vector collection: 'MilvusClient' object has no attribute 'has_collection'", "module": "index_manager", "function": "_ensure_vector_collection", "line": 94}
{"timestamp": "2025-12-31T10:14:23.588051Z", "level": "ERROR", "logger": "asyncio", "message": "Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x11387e120>", "module": "base_events", "function": "default_exception_handler", "line": 1879}
{"timestamp": "2025-12-31T10:14:23.588223Z", "level": "ERROR", "logger": "asyncio", "message": "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x1137770b0>, 119809.867510058)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x11387dd30>", "module": "base_events", "function": "default_exception_handler", "line": 1879}
{"timestamp": "2026-01-05T02:33:52.343523Z", "level": "INFO", "logger": "rag-service", "message": "Logging initialized for rag-service", "module": "logging", "function": "setup_logging", "line": 126}
{"timestamp": "2026-01-05T02:33:52.343635Z", "level": "INFO", "logger": "rag-service", "message": "Starting rag-service...", "module": "run", "function": "main", "line": 52}
{"timestamp": "2026-01-05T02:33:52.343701Z", "level": "INFO", "logger": "rag-service", "message": "Configuration: host=0.0.0.0, port=8002", "module": "run", "function": "main", "line": 53}
{"timestamp": "2026-01-05T02:33:52.343758Z", "level": "INFO", "logger": "rag-service", "message": "Elasticsearch: http://localhost:9200", "module": "run", "function": "main", "line": 54}
{"timestamp": "2026-01-05T02:33:52.350244Z", "level": "INFO", "logger": "rag-service", "message": "rag-service starting on http://0.0.0.0:8002", "module": "run", "function": "main", "line": 62}
{"timestamp": "2026-01-05T02:33:52.447251Z", "level": "INFO", "logger": "services.common.fastapi_nacos", "message": "Nacos registration disabled", "module": "fastapi_nacos", "function": "startup", "line": 115}
{"timestamp": "2026-01-05T02:33:53.092752Z", "level": "INFO", "logger": "services.rag_service.storage.milvus_client", "message": "Connected to Milvus collection: customer_service_kb", "module": "milvus_client", "function": "connect", "line": 69}
{"timestamp": "2026-01-05T02:33:53.374173Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "GET http://localhost:9200/ [status:200 duration:0.013s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T02:33:53.374324Z", "level": "INFO", "logger": "services.rag_service.storage.elasticsearch_client", "message": "Connected to Elasticsearch: 8.5.0", "module": "elasticsearch_client", "function": "connect", "line": 69}
{"timestamp": "2026-01-05T02:33:53.844326Z", "level": "INFO", "logger": "services.rag_service.storage.embedding_service", "message": "Embedding model warmed up: nomic-embed-text", "module": "embedding_service", "function": "warmup", "line": 166}
{"timestamp": "2026-01-05T02:33:57.349402Z", "level": "INFO", "logger": "services.rag_service.storage.milvus_client", "message": "Created Milvus collection: knowledge_base", "module": "milvus_client", "function": "_create_collection", "line": 107}
{"timestamp": "2026-01-05T02:33:57.349516Z", "level": "INFO", "logger": "services.rag_service.index.index_manager", "message": "Created vector collection: knowledge_base", "module": "index_manager", "function": "_ensure_vector_collection", "line": 92}
{"timestamp": "2026-01-05T02:33:57.349605Z", "level": "ERROR", "logger": "services.rag_service.index.index_manager", "message": "Failed to ensure ES index: 'ElasticsearchClient' object has no attribute 'indices'", "module": "index_manager", "function": "_ensure_es_index", "line": 135}
{"timestamp": "2026-01-05T02:33:57.390609Z", "level": "ERROR", "logger": "asyncio", "message": "Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x108a68c20>", "module": "base_events", "function": "default_exception_handler", "line": 1879}
{"timestamp": "2026-01-05T02:33:57.390784Z", "level": "ERROR", "logger": "asyncio", "message": "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x108913ef0>, 5658.954638141)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x108a68830>", "module": "base_events", "function": "default_exception_handler", "line": 1879}
{"timestamp": "2026-01-05T02:34:02.600378Z", "level": "INFO", "logger": "rag-service", "message": "Logging initialized for rag-service", "module": "logging", "function": "setup_logging", "line": 126}
{"timestamp": "2026-01-05T02:34:02.600470Z", "level": "INFO", "logger": "rag-service", "message": "Starting rag-service...", "module": "run", "function": "main", "line": 52}
{"timestamp": "2026-01-05T02:34:02.600567Z", "level": "INFO", "logger": "rag-service", "message": "Configuration: host=0.0.0.0, port=8002", "module": "run", "function": "main", "line": 53}
{"timestamp": "2026-01-05T02:34:02.600620Z", "level": "INFO", "logger": "rag-service", "message": "Elasticsearch: http://localhost:9200", "module": "run", "function": "main", "line": 54}
{"timestamp": "2026-01-05T02:34:02.609756Z", "level": "INFO", "logger": "rag-service", "message": "rag-service starting on http://0.0.0.0:8002", "module": "run", "function": "main", "line": 62}
{"timestamp": "2026-01-05T02:34:02.674111Z", "level": "INFO", "logger": "services.common.fastapi_nacos", "message": "Nacos registration disabled", "module": "fastapi_nacos", "function": "startup", "line": 115}
{"timestamp": "2026-01-05T02:34:03.030479Z", "level": "INFO", "logger": "services.rag_service.storage.milvus_client", "message": "Connected to Milvus collection: customer_service_kb", "module": "milvus_client", "function": "connect", "line": 69}
{"timestamp": "2026-01-05T02:34:03.226148Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "GET http://localhost:9200/ [status:200 duration:0.011s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T02:34:03.226331Z", "level": "INFO", "logger": "services.rag_service.storage.elasticsearch_client", "message": "Connected to Elasticsearch: 8.5.0", "module": "elasticsearch_client", "function": "connect", "line": 69}
{"timestamp": "2026-01-05T02:34:03.290376Z", "level": "INFO", "logger": "services.rag_service.storage.embedding_service", "message": "Embedding model warmed up: nomic-embed-text", "module": "embedding_service", "function": "warmup", "line": 166}
{"timestamp": "2026-01-05T02:34:03.293237Z", "level": "ERROR", "logger": "services.rag_service.index.index_manager", "message": "Failed to ensure ES index: 'ElasticsearchClient' object has no attribute 'indices'", "module": "index_manager", "function": "_ensure_es_index", "line": 135}
{"timestamp": "2026-01-05T02:34:03.332827Z", "level": "ERROR", "logger": "asyncio", "message": "Unclosed client session\nclient_session: <aiohttp.client.ClientSession object at 0x112d70ec0>", "module": "base_events", "function": "default_exception_handler", "line": 1879}
{"timestamp": "2026-01-05T02:34:03.333025Z", "level": "ERROR", "logger": "asyncio", "message": "Unclosed connector\nconnections: ['deque([(<aiohttp.client_proto.ResponseHandler object at 0x112c1bf50>, 5668.806474562)])']\nconnector: <aiohttp.connector.TCPConnector object at 0x112d70ad0>", "module": "base_events", "function": "default_exception_handler", "line": 1879}
{"timestamp": "2026-01-05T02:36:11.298093Z", "level": "INFO", "logger": "rag-service", "message": "Logging initialized for rag-service", "module": "logging", "function": "setup_logging", "line": 126}
{"timestamp": "2026-01-05T02:36:11.298208Z", "level": "INFO", "logger": "rag-service", "message": "Starting rag-service...", "module": "run", "function": "main", "line": 52}
{"timestamp": "2026-01-05T02:36:11.298282Z", "level": "INFO", "logger": "rag-service", "message": "Configuration: host=0.0.0.0, port=8002", "module": "run", "function": "main", "line": 53}
{"timestamp": "2026-01-05T02:36:11.298345Z", "level": "INFO", "logger": "rag-service", "message": "Elasticsearch: http://localhost:9200", "module": "run", "function": "main", "line": 54}
{"timestamp": "2026-01-05T02:36:11.305232Z", "level": "INFO", "logger": "rag-service", "message": "rag-service starting on http://0.0.0.0:8002", "module": "run", "function": "main", "line": 62}
{"timestamp": "2026-01-05T02:36:11.373862Z", "level": "INFO", "logger": "services.common.fastapi_nacos", "message": "Nacos registration disabled", "module": "fastapi_nacos", "function": "startup", "line": 115}
{"timestamp": "2026-01-05T02:36:11.746500Z", "level": "INFO", "logger": "services.rag_service.storage.milvus_client", "message": "Connected to Milvus collection: customer_service_kb", "module": "milvus_client", "function": "connect", "line": 69}
{"timestamp": "2026-01-05T02:36:11.934928Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "GET http://localhost:9200/ [status:200 duration:0.009s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T02:36:11.935098Z", "level": "INFO", "logger": "services.rag_service.storage.elasticsearch_client", "message": "Connected to Elasticsearch: 8.5.0", "module": "elasticsearch_client", "function": "connect", "line": 108}
{"timestamp": "2026-01-05T02:36:12.002201Z", "level": "INFO", "logger": "services.rag_service.storage.embedding_service", "message": "Embedding model warmed up: nomic-embed-text", "module": "embedding_service", "function": "warmup", "line": 166}
{"timestamp": "2026-01-05T02:36:12.083019Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "HEAD http://localhost:9200/knowledge_base [status:404 duration:0.078s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T02:36:12.970432Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "PUT http://localhost:9200/knowledge_base [status:200 duration:0.779s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T02:36:12.970601Z", "level": "INFO", "logger": "services.rag_service.index.index_manager", "message": "Created ES index: knowledge_base", "module": "index_manager", "function": "_ensure_es_index", "line": 133}
{"timestamp": "2026-01-05T02:36:12.970674Z", "level": "INFO", "logger": "services.rag_service.index.index_manager", "message": "Index manager initialized", "module": "index_manager", "function": "initialize", "line": 80}
{"timestamp": "2026-01-05T02:36:12.970741Z", "level": "INFO", "logger": "services.rag_service.service", "message": "RAG Service initialized", "module": "service", "function": "initialize", "line": 198}
{"timestamp": "2026-01-05T02:36:12.970813Z", "level": "INFO", "logger": "services.rag_service.server", "message": "RAG Service started", "module": "server", "function": "_on_startup", "line": 147}
{"timestamp": "2026-01-05T02:36:16.896165Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "GET http://localhost:9200/knowledge_base*/_stats [status:200 duration:0.031s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T02:37:04.926853Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "GET http://localhost:9200/knowledge_base*/_stats [status:200 duration:0.006s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T02:39:01.410750Z", "level": "WARNING", "logger": "services.rag_service.pipeline.query_transform", "message": "Query rewriting failed: Client error '404 Not Found' for url 'http://localhost:11434/api/generate'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404", "module": "query_transform", "function": "_rewrite_query", "line": 180}
{"timestamp": "2026-01-05T02:39:02.302705Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "POST http://localhost:9200/knowledge_base/_search [status:200 duration:0.830s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T02:39:22.087391Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "GET http://localhost:9200/knowledge_base/_stats [status:200 duration:0.013s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T02:39:22.427508Z", "level": "INFO", "logger": "elastic_transport.transport", "message": "POST http://localhost:9200/knowledge_base/_search [status:200 duration:0.307s]", "module": "_async_transport", "function": "perform_request", "line": 271}
{"timestamp": "2026-01-05T10:32:15.842956Z", "level": "INFO", "logger": "services.rag_service.server", "message": "RAG Service shutting down", "module": "server", "function": "_on_shutdown", "line": 151}
