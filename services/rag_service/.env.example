# ============================================================
# RAG Service Configuration
# ============================================================
# Copy this file to .env and modify as needed

# ============ Service Configuration ============
SERVICE_NAME=rag-service
SERVICE_VERSION=1.0.0
SERVICE_HOST=0.0.0.0
HTTP_PORT=8002

# ============ Nacos Configuration ============
NACOS_ENABLED=true
NACOS_SERVER_ADDRESSES=localhost:8848
NACOS_NAMESPACE=public
NACOS_GROUP=DEFAULT_GROUP
NACOS_USERNAME=
NACOS_PASSWORD=

# ============ Elasticsearch Configuration ============
ELASTICSEARCH_ENABLED=true
ELASTICSEARCH_URL=http://localhost:9200
ELASTICSEARCH_HOSTS=http://localhost:9200
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_INDEX_PREFIX=knowledge_base
ELASTICSEARCH_CHUNK_INDEX=knowledge_base_chunks
ELASTICSEARCH_USE_SSL=false
ELASTICSEARCH_VERIFY_CERTS=true
ELASTICSEARCH_TIMEOUT=30
ELASTICSEARCH_MAX_RETRIES=3

# ============ Milvus Vector Store ============
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_COLLECTION=customer_service_kb
MILVUS_DATABASE=default

# ============ Embedding Configuration ============
EMBEDDING_MODEL=nomic-embed-text
EMBEDDING_BASE_URL=http://localhost:11434
EMBEDDING_BATCH_SIZE=50
EMBEDDING_MAX_CONCURRENT=20

# ============ Hybrid Storage (ES + Milvus) ============
HYBRID_STORAGE_ENABLED=true
HYBRID_MILVUS_WEIGHT=0.7
HYBRID_ES_WEIGHT=0.3
HYBRID_SEARCH_TOP_K=20

# ============ RAG Configuration ============
RAG_CHUNK_SIZE=500
RAG_CHUNK_OVERLAP=50
RAG_TOP_K=5

# RAG Query Transformation
RAG_ENABLE_HYDE=false
RAG_ENABLE_QUERY_EXPANSION=false
RAG_QUERY_EXPANSION_NUM=3

# RAG Hybrid Retrieval
RAG_ENABLE_HYBRID=true
RAG_VECTOR_WEIGHT=0.7
RAG_BM25_WEIGHT=0.3
RAG_RETRIEVAL_TOP_K=10

# RAG Reranking
RAG_ENABLE_RERANK=true
RAG_RERANK_MODEL=jinaai/jina-reranker-v2-base-multilingual
RAG_RERANK_TOP_N=5
RAG_RERANK_SCORE_THRESHOLD=0.3

# RAG Post-processing
RAG_ENABLE_DEDUP=true
RAG_DEDUP_THRESHOLD=0.95
RAG_FINAL_TOP_K=5

# RAG Document Processing
RAG_USE_SEMANTIC_CHUNKING=false

# ============ Knowledge Base ============
KNOWLEDGE_BASE_PATH=./data/knowledge_base
AUTO_INDEX_KNOWLEDGE_BASE=true

# ============ Logging Configuration ============
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_TO_CONSOLE=true
LOG_TO_FILE=true
LOG_DIR=./logs
LOG_RAG_SEPARATE=true
